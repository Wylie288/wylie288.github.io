<!DOCTYPE HTML>
<html>
	<head>
		<title>Ultimate Chess</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<div class="inner">
					<a href="../index.html" class="image avatar"><img src="../images/avatarPic.jpg" alt="" /></a>
					<h1><strong>I am Brendan</strong>, a Software Engineer
				</div>
			</header>

		<!-- Main -->
			<div id="main">
			<!-- One -->
				<section id="one">
					<header class="major">
						<h1>Ultimate Chess</h1>
					</header>
					<div class="box alt">
						<div class="row gtr-50 gtr-uniform">
							<div class="col-12"><span class="image fit"><img src="main.png" alt="" /></span></div>
						</div>
					</div>
					<p> <b>Ultimate Chess</b> is an new take on chess. Featuring new pieces, a larger board, and the ability to place your own pieces before the match starts. This was my first group SE project. Given my game development experiance I acted as team lead on this project. I created the grid, board manager, and the parent piece object.</p>
					<h2>Downloads</h2>
					<ul class="actions">
						<li><a href="starship_captain/Starship_Captain.exe" class="button primary icon solid fa-download">Windows</a></li>
						<li><a href="starship_captain/Starship_Captain.apk" class="button primary icon solid fa-download">Android</a></li>
						<li><a href="https://github.com/Wylie288/Starship-Captain" class="button primary icon brands fa-github">GitHub</a></li>
					</ul>
				</section>

			<!-- Two -->
				<section id="two">
					<h2>Technical Information</h2>
					<h3>Project Details</h3>
					<p>
						<b>IDE: Unity/Visual Studio</b><br>
						<b>Languages: C#</b> <br>
						<b>Stage: Final</b>
					</p>
					<h3>List of Features</h3>
					<p>
						<li>Before the match starts players place their pieces until they reach a maximum value of total pieces</li>
						<li>When selecting a piece the game shows you what spaces it can move to as well as any pieces it can take</li>
						<li>Check detection</li>
						<li>The game manages turn order</li>
						<li>Save game/Load game system</li>
						<li>OO principles are used to allow quick addition/modification of piece behavior</li>
					</p>
					<button class="button collapsible primary icon solid fa-plus">Board Manager</button>
					<div class="content" id="imageSet2"><br>
					<p>The bulk of the game exists in the board manager class. It is responsible for tracking who's turn it, what pieces are where, and if the king is in check. The latter data is stored as part of a 3D array. The first two dimensions are x and y positions of the board. The 3rd dimension has 2 layers. Piece type and piece color. The bottom left of the grid rests at (0,0,0). When the player clicks on the screen it sends a raycast towards the grid and returns the cooridnates of the collision. These values are divided by the size of each grid space then rounded down. The board manager then checks to see what piece is in that position and proceeds accordingly.</p>
					</div>
					<button class="button collapsible primary icon solid fa-plus">Piece Definition</button>
					<div class="content" id="imageSet2"><br>
					<p>To define movement behaviour the CreateMarker method is called for each space that piece can move to. The method has 3 arguments. Relative X position, Relative Y position, and Type. The type has 3 states. 2 is the most common. This is used for any space a piece can move to, and take at. The others are primarly used for pawns. 0 is used for any space a piece can move to, but cannot take at. 1 is used for a space a piece can ONLY take at, but not normally move to.</p>
					<h3>Example Piece Definitions</h3>
					<pre><code>public class King : Piece  {
	public override void Movement() {
		base.CreateMarker(0, 1, 2);
		base.CreateMarker(0, -1, 2);
		base.CreateMarker(1, 0, 2);
		base.CreateMarker(-1, 0, 2);
		base.CreateMarker(1, 1, 2);
		base.CreateMarker(1, -1, 2);
		base.CreateMarker(-1, 1, 2);
		base.CreateMarker(-1, -1, 2);
	}
}
public class Pawn : Piece {
	public override void Movement() {
		if(color == 0) {
			base.CreateMarker(0, 1, 0);
			base.CreateMarker(-1, 1, 1);
			base.CreateMarker(1, 1, 1);
		}
		//Snip//
	}
}

public class Rook : Piece {
	public override void Movement() {
		int i = 1;
		int stopped = 0;
		while (stopped==0) { //up
			base.CreateMarker(0, i, 2);
			//If next is out of bounds, or colliding with another piece
			if (y + i >= 9) or (GameObject.FindWithTag("Grid").GetComponent<BoardManager>().boardState[x, y + i, 0] != 0)
				stopped = 1;
			i++;     
		}
		//Snip//
	}
}</code></pre>
				</div>
				</section>
			
			<!-- Three -->
				<section id="three">
					<h2>What I learned</h2>
					<p>This project offered a few new experiances. Ultimate Chess was the first time I used unity or C# beyond following a simple youtube tutorial. Ultimate Chess was also the first time I worked with others on a project's code base. The most important lesson I learned with this project were coding paradigms. The CS class I had taken this semester taught us C++ and functional design. I laid the groundwork for this project using functional design under the incorrect assumption the object oriented way of coding I had been used to was "bad". It wasn't until a senior had noticed and asked why we weren't taking better advantage of C#s inheritence that I learned about the concept of paradigms. The pieces themselves were refactored but the board manager is still almost entirely functional</p>
					<p>This project is also a good example of how my code has evolved. The following are examples of code used to display where a piece can move after being clicked on</p>
					<button class="button collapsible primary icon solid fa-plus">Code From Past:</button>
					<div class="content" id="imageSet2"><br>
					<pre><code>public class Piece : MonoBehaviour
{
	//Snip//
	public void OnMouseDown()
	{
		//Snip//
	}

	//Snip//

	public void CreateMarker (int rx, int ry, int type)
	{
		if ((x + rx >= 0) && (x + rx <= 9) && (y + ry >= 0) && (y + ry <= 9)) //If not out of bounds
		{
			if (GameObject.FindWithTag("Grid").GetComponent<BoardManager>().gameState - 2 == color)
			{  // Same color
				bool empty = false;
				if (GameObject.FindWithTag("Grid").GetComponent<BoardManager>().boardState[x + rx, y + ry, 0] == 0)
					empty = true;
				bool opponent = false;
				if (GameObject.FindWithTag("Grid").GetComponent<BoardManager>().boardState[x + rx, y + ry, 1] != color)
					opponent = true;

				//Move Only
				if ((type == 0) && (empty == true))
					InstantiateMarker(rx, ry, type);
				//Take Only
				if ((type == 1) && (empty == false) && (opponent == true))
					InstantiateMarker(rx, ry, type);
				//Move/Take
				if ((type == 2) && ((empty == true) || (opponent == true)))
					InstantiateMarker(rx, ry, type);
			}
			else // Different color
			{
				if ((GameObject.FindWithTag("Grid").GetComponent<BoardManager>().boardState[x + rx, y + ry, 1] != color) && (GameObject.FindWithTag("Grid").GetComponent<BoardManager>().boardState[x + rx, y + ry, 0] == 1) && (type > 0))
				{
					GameObject.FindWithTag("Grid").GetComponent<BoardManager>().check = true;
				}
			}
		}
	}

	public void InstantiateMarker(int rx, int ry, int type)
	{
		//Snip//
	}
		
	public virtual void Movement ()
	{
		//Snip//
	}
}</code></pre>
					</div>
					<button class="button collapsible primary icon solid fa-plus">Rewritten:</button>
					<div class="content" id="imageSet2"><br>
						<pre><code>public class Piece : MonoBehaviour {
	//Snip//
	public const int MOVE = 0;
	public const int TAKE = 1;
	public const int MOVETAKE = 2;
	public const int KING = 1;

	public void OnMouseDown() {
		//Snip//
	}
	//Snip//
	public void CreateMarker (int relativeX, int relativeY, int type) {
		BoardManager boardManager = GameObject.FindWithTag("Grid").GetComponent<BoardManager>();
		Vector2Int position = new Vector2Int(x + relativeX, y + relativeY);
		if (isInBounds(position)) {      
			if (boardManager.getActivePlayer() == color) {                
				if ((type == MOVE)      && (IsEmpty(position)))
					InstantiateMarkerMove(position);
				if ((type == TAKE)     && (!IsEmpty(position)) && (IsOpponent(position)))
					InstantiateMarkerTake(position);
				if ((type == MOVETAKE) && ((IsEmpty(position)) || (IsOpponent(position))))
					InstantiateMarkerTake(position);
			}
			else if ((type > MOVE) && (IsOpponent(position)) && (boardManager.GetPieceAt(position) == KING))
				boardManager.check = true;
		}
	}
	public void InstantiateMarkerMove(Vector2Int position) {
		//Snip//
	}
	public void InstantiateMarkerTake(Vector2Int position) {
		//Snip//
	}
		
	public virtual void Movement () {
	}

	bool IsInBounds(Vector2Int position) {
		if ((position.x >= 0) && (position.x <= 9) && (position.y >= 0) && (position.y <= 9)); return true; else return false;
	}

	bool IsEmpty(Vector2Int position) {
		if (boardManager.GetPieceAt(position) == 0); return true; else return false;
	}

	bool IsOpponent(Vector2Int position) {
		if (boardManager.GetColorAt(position) != color); return true; else return false;
	}
}</code></pre>
					</div>
			</section>

			<!-- four -->
				<section id="four">
					<h2>Image Gallery</h2>
					<div class="row" id="imageSet1">
						<article class="col-6 col-12-xsmall work-item">
							<a href="gallery1.png" class="image fit thumb"><img src="gallery1.png" alt="" /></a>
							<h3 style="display: none">Image 1</h3>
						</article>
						<article class="col-6 col-12-xsmall work-item">
							<a href="gallery2.png" class="image fit thumb"><img src="gallery2.png" alt="" /></a>
							<h3 style="display: none">Image 2</h3>
						</article>
						<article class="col-6 col-12-xsmall work-item">
							<a href="gallery3.png" class="image fit thumb"><img src="gallery3.png" alt="" /></a>
							<h3 style="display: none">Image 3</h3>
						</article>
						<article class="col-6 col-12-xsmall work-item">
							<a href="gallery4.png" class="image fit thumb"><img src="gallery4.png" alt="" /></a>
							<h3 style="display: none">Image 4</h3>
						</article>
					</div>
					<a href="#" id="backToTop" class="button small">Back to Top</a>
				</section>
			</div>
		</body>
		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<ul class="icons">
						<li><a href="https://www.facebook.com/Wylie28/" class="icon brands fa-facebook"><span class="label">Facebook</span></a></li>
						<li><a href="https://github.com/Wylie288" class="icon brands fa-github"><span class="label">Github</span></a></li>
						<li><a href="wylie288.github.io" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
						<li><a href="mailto:brendanforish@hotmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.poptrox.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../util.js"></script>
			<script src="../assets/js/main.js"></script>
</html>